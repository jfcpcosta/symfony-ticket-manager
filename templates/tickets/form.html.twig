{% extends 'base.html.twig' %}

{% block title %}{{ ticket is defined ? 'Update' : 'Add' }} Ticket{% endblock %}

{% block body %}
    <form action="/tickets/save" method="post">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title">{{ ticket is defined ? 'Update' : 'Create' }} Ticket</h5>
                <h6 class="card-subtitle mb-2 text-muted">Add ticket info</h6>
            </div>

            <div class="card-body">
                <div class="form-group">
                    <label for="titleInput">Title</title>
                    <input type="text" class="form-control" id="titleInput" placeholder="Ticket title" name="title" value="{{ ticket is defined ? ticket.title }}">
                </div>
                <div class="form-group">
                    <label for="descriptionInput">Description</title>
                    <textarea class="form-control" id="descriptionInput" placeholder="Ticket description" name="description" rows="3">{{ ticket is defined ? ticket.description }}</textarea>
                </div>
                <div class="form-group">
                    <label for="severityInput">Severity</title>
                    <select class="form-control" id="severityInput" name="severity">
                        {% for severity in severities %}
                            {% if ticket is defined %}
                                <option value="{{ severity.id }}" {{ ticket.severity == severity.id ? 'selected' }}>{{ severity.name | upper }}</option>
                            {% else %}
                                <option value="{{ severity.id }}" {{ severity.isDefault ? 'selected' }}>{{ severity.name | upper }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>            
            </div>

            {% if ticket is defined %}
                <input type="hidden" name="id" value="{{ ticket.id }}">
            {% endif %}

            <div class="card-footer text-muted">
                <button class="btn btn-primary" type="submit">Save</button>
            </div>    
        </div>
    </form>
{% endblock %}